/*!
 * Chirpy v4.3.3 (https://github.com/cotes2020/jekyll-theme-chirpy/)
 * © 2019 Cotes Chung
 * MIT Licensed
 */
$(function(){$(window).scroll(()=>{$(this).scrollTop()>50&&"none"===$("#sidebar-trigger").css("display")?$("#back-to-top").fadeIn():$("#back-to-top").fadeOut()}),$("#back-to-top").click(()=>($("body,html").animate({scrollTop:0},800),!1))}),$(function(){const t=$("#sidebar-trigger"),e=$("#search-trigger"),n=$("#search-cancel"),o=$("#search-cleaner"),a=$("#main"),r=$("#topbar-title"),i=$("#search-wrapper"),l=$("#search-result-wrapper"),s=$("#search-results"),c=$("#search-input"),d=$("#search-hints"),u=function(){let t=0;return{block(){t=window.scrollY,$("html,body").scrollTop(0)},release(){$("html,body").scrollTop(t)},getOffset:()=>t}}(),p={on(){t.addClass("unloaded"),r.addClass("unloaded"),e.addClass("unloaded"),i.addClass("d-flex"),n.addClass("loaded")},off(){n.removeClass("loaded"),i.removeClass("d-flex"),t.removeClass("unloaded"),r.removeClass("unloaded"),e.removeClass("unloaded")}},h=function(){let t=!1;return{on(){t||(u.block(),l.removeClass("unloaded"),a.addClass("unloaded"),t=!0)},off(){t&&(s.empty(),d.hasClass("unloaded")&&d.removeClass("unloaded"),l.addClass("unloaded"),o.removeClass("visible"),a.removeClass("unloaded"),u.release(),c.val(""),t=!1)},isVisible:()=>t}}();function f(){return n.hasClass("loaded")}e.click(function(){p.on(),h.on(),c.focus()}),n.click(function(){p.off(),h.off()}),c.focus(function(){i.addClass("input-focus")}),c.focusout(function(){i.removeClass("input-focus")}),c.on("keyup",function(t){8===t.keyCode&&""===c.val()?f()?d.removeClass("unloaded"):h.off():""!==c.val()&&(h.on(),o.hasClass("visible")||o.addClass("visible"),f()&&d.addClass("unloaded"))}),o.on("click",function(){c.val(""),f()?(d.removeClass("unloaded"),s.empty()):h.off(),c.focus(),o.removeClass("visible")})}),$(function(){const t=function(){let t=!1;const e=$("body");return{toggle(){!1===t?e.attr("sidebar-display",""):e.removeAttr("sidebar-display"),t=!t}}}();$("#sidebar-trigger").click(t.toggle),$("#mask").click(t.toggle)}),$(function(){$('[data-toggle="tooltip"]').tooltip()}),$(function(){const t=$("#topbar-wrapper"),e=$("#toc-wrapper"),n=$(".access"),o=$("#search-input");let a,r=0;const i=5,l=t.outerHeight();$(window).scroll(function(t){$("#topbar-title").is(":hidden")&&(a=!0)}),setInterval(function(){a&&(!function(){var a=$(this).scrollTop();Math.abs(r-a)<=i||(a>r&&a>l?(t.removeClass("topbar-down").addClass("topbar-up"),e.length>0&&e.removeClass("topbar-down"),n.length>0&&n.removeClass("topbar-down"),o.is(":focus")&&o.blur()):a+$(window).height()<$(document).height()&&(t.removeClass("topbar-up").addClass("topbar-down"),e.length>0&&e.addClass("topbar-down"),n.length>0&&n.addClass("topbar-down")),r=a)}(),a=!1)},250)}),$(function(){const t=$("#topbar-title"),e=$("div.post>h1"),n=t.text().trim();let o=e.length>0?e.text().trim():$("h1").text().trim();($("#page-category").length||$("#page-tag").length)&&/\s/.test(o)&&(o=o.replace(/[0-9]/g,"").trim()),$(window).scroll(function(){if($("#post-list").length||e.is(":hidden")||t.is(":hidden")||$("#sidebar.sidebar-expand").length)return!1;$(this).scrollTop()>=95?t.text()!==o&&t.text(o):t.text()!==n&&t.text(n)}),t.click(function(){$("body,html").animate({scrollTop:0},800)})}),$(function(){if($("div.row img").length<=0)return;const t=document.querySelectorAll("div.row img[data-src]");lozad(t).observe(),$("div.row p > img[data-src],div.row img[data-src].preview-img").each(function(){let t=$(this).next();const e="EM"===t.prop("tagName")?t.text():"",n=$(this).attr("data-src");$(this).wrap(`<a href="${n}" title="${e}" class="popup"></a>`)}),$(".popup").magnificPopup({type:"image",closeOnContentClick:!0,showCloseBtn:!1,zoom:{enabled:!0,duration:300,easing:"ease-in-out"}}),$("div.row a").has("img").addClass("img-link")}),$(function(){let t=$(".timeago").length,e=void 0;const n=$("meta[name=day-prompt]").attr("content"),o=$("meta[name=hour-prompt]").attr("content"),a=$("meta[name=minute-prompt]").attr("content"),r=$("meta[name=justnow-prompt]").attr("content");function i(){return $(".timeago").each(function(){if($(this).children("i").length>0){let e=$(this).clone().children().remove().end().text(),i=$(this).children("i"),l=i.text();$(this).text(function(e,i){let l=new Date,s=new Date(e);if(s.getFullYear()!==l.getFullYear()||s.getMonth()!==l.getMonth())return i;let c=Math.floor((l-s)/1e3),d=Math.floor(c/86400);if(d>=1)return t-=1,` ${d} ${n}`;let u=Math.floor(c/3600);if(u>=1)return` ${u} ${o}`;let p=Math.floor(c/60);return p>=1?` ${p} ${a}`:r}(l,e)),$(this).append(i)}let e=$(this).attr("data-original-title"),i=new Date(e);$(this).attr("data-original-title",function(t,e){let n=e.getDay(),o=Math.floor((e.getMonth()+3)/3).toString();const a={"Y+":e.getFullYear().toString(),"m+":(e.getMonth()+1).toString(),"d+":e.getDate().toString(),"H+":e.getHours().toString(),"M+":e.getMinutes().toString(),"S+":e.getSeconds().toString(),"q+":o},r={0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"},i={1:"一",2:"二",3:"三",4:"四"};/(W+)/.test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length>1?RegExp.$1.length>2?"星期"+r[n]:"周"+r[n]:r[n])),/(Q+)/.test(t)&&(t=t.replace(RegExp.$1,4==RegExp.$1.length?"第"+i[o]+"季度":i[o]));for(let e in a){let n=new RegExp("("+e+")").exec(t);n&&(t=t.replace(n[1],1==RegExp.$1.length?a[e]:a[e].padStart(RegExp.$1.length,"0")))}return t}("YYYY年m月d日 WWW HH:MM:SS",i))}),0===t&&void 0!==e&&clearInterval(e),t}0!==t&&i()>0&&(e=setInterval(i,6e4))}),$(function(){$("input[type=checkbox]").addClass("unloaded"),$("input[type=checkbox][checked]").before('<i class="iconfont icon-iccheckcircle checked"></i>'),$("input[type=checkbox]:not([checked])").before('<i class="iconfont icon-yuan_fuzhi"></i>')}),$(function(){const t=".code-header button.button-copy",e="iconfont icon-check",n="timeout",o=2e3;function a(t){if($(t)[0].hasAttribute(n)){let e=$(t).attr(n);if(Number(e)>Date.now())return!0}return!1}function r(t){$(t).attr(n,Date.now()+o)}function i(t){$(t).removeAttr(n)}const l=new ClipboardJS(t,{target:t=>t.parentNode.parentNode.nextElementSibling.querySelector("code .rouge-code")});$(t).tooltip({trigger:"hover",placement:"left"});const s=$(t).children().attr("class");l.on("success",t=>{t.clearSelection();const n=t.trigger;a(n)||(!function(t){$(t).children().attr("class",e)}(n),function(t){const e=$(t).attr("title-succeed");$(t).attr("data-original-title",e).tooltip("show")}(n),r(n),setTimeout(()=>{!function(t){$(t).tooltip("hide").removeAttr("data-original-title")}(n),function(t){$(t).children().attr("class",s)}(n),i(n)},o))}),$("#copy-link").click(t=>{let e=$(t.target);if(a(e))return;const n=window.location.href,l=$("<input>");$("body").append(l),l.val(n).select(),document.execCommand("copy"),l.remove();const s=e.attr("data-original-title"),c=e.attr("title-succeed");e.attr("data-original-title",c).tooltip("show"),r(e),setTimeout(()=>{e.attr("data-original-title",s),i(e)},o)})}),$(function(){const t="lock",e=2e4;function n(e){$(e).removeAttr(t),$("i",e).removeClass("icon-loading").addClass("icon-playfill")}function o(t,e,o,a){const r=$(t).find("pre");let i;if(2==r.length)i=r.get(1).innerText;else{if(1!=r.length)return void n(o);i=r.get(0).innerText}let l={cmd:"g++ main.cpp && ./a.out",src:i};(function(t,e,n=2e4){return Promise.race([fetch(t,e),new Promise((t,e)=>setTimeout(()=>e(new Error("timeout")),n))])})("http://coliru.stacked-crooked.com/compile",{headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"POST",mode:"cors",body:JSON.stringify(l)}).then(t=>t.text()).then(t=>{e.innerText=t,n(o)}).catch(t=>{e.innerText=a+t.message,n(o)})}$(".code-header button.button-run-cpp").click(function(n){if(function(e){if($(e)[0].hasAttribute(t)){let n=$(e).attr(t);if(Number(n)+5e3>Date.now())return!0}return!1}($(this)))return;var a;a=$(this),$(a).attr(t,Date.now()+e),$("i",a).removeClass("icon-playfill").addClass("icon-loading");let r=function(t){let e=t.parentNode.parentNode.parentNode.nextElementSibling;if(null==e||"DETAILS"!=e.tagName||"run-output"!=e.className){let n=e;(e=document.createElement("details")).className="run-output";let o=document.createElement("summary");o.textContent=t.attributes["output-title"].value,e.appendChild(o),null==n?t.parentNode.parentNode.parentNode.parentNode.appendChild(e):n.parentNode.insertBefore(e,n)}return $(e).attr("open","open"),e}(this);$("p",$(r)).remove();let i=document.createElement("p");i.innerText=this.attributes["wait-message"].value,r.appendChild(i),o(this.parentNode.parentNode.nextElementSibling,i,$(this),this.attributes["error-prompt"].value)})}),$(function(){"use strict";const t="lock",e=2e4;function n(e){$(e).removeAttr(t),$("i",e).removeClass("icon-loading").addClass("icon-playfill")}function o(){console.logs.push(Array.from(arguments)),console.stdlog.apply(console,arguments)}$(".code-header button.button-run-javascript").click(function(a){if(function(e){if($(e)[0].hasAttribute(t)){let n=$(e).attr(t);if(Number(n)+5e3>Date.now())return!0}return!1}($(this)))return;var r;r=$(this),$(r).attr(t,Date.now()+e),$("i",r).removeClass("icon-playfill").addClass("icon-loading");let i=function(t){let e=t.parentNode.parentNode.parentNode.nextElementSibling;if(null==e||"DETAILS"!=e.tagName||"run-output"!=e.className){let n=e;(e=document.createElement("details")).className="run-output";let o=document.createElement("summary");o.textContent=t.attributes["output-title"].value,e.appendChild(o),null==n?t.parentNode.parentNode.parentNode.parentNode.appendChild(e):n.parentNode.insertBefore(e,n)}return $(e).attr("open","open"),e}(this);$("p",$(i)).remove();let l=document.createElement("p");l.innerText=this.attributes["wait-message"].value,i.appendChild(l);const s=this.parentNode.parentNode.nextElementSibling,c=$(s).find("pre");let d;if(2==c.length)d=c.get(1).innerText;else{if(1!=c.length)return void n($(this));d=c.get(0).innerText}var u=new Function(d);console.log!=o&&(console.stdlog=console.log.bind(console),console.log=o),console.logs=[],u(),l.innerText=console.logs.join("\n"),n($(this))})}),$(function(){const t="lock",e=2e4;function n(e){$(e).removeAttr(t),$("i",e).removeClass("icon-loading").addClass("icon-playfill")}function o(t,e,o,a){const r=$(t).find("pre");let i;if(2==r.length)i=r.get(1).innerText;else{if(1!=r.length)return void n(o);i=r.get(0).innerText}let l={version:"stable",optimize:"0",code:i,edition:"2021"};-1!==i.indexOf("#![feature")&&(l.version="nightly"),function(t,e,n=2e4){return Promise.race([fetch(t,e),new Promise((t,e)=>setTimeout(()=>e(new Error("timeout")),n))])}("https://play.rust-lang.org/evaluate.json",{headers:{"Content-Type":"application/json"},method:"POST",mode:"cors",body:JSON.stringify(l)}).then(t=>t.json()).then(t=>{e.innerText=t.result,n(o)}).catch(t=>{e.innerText=a+t.message,n(o)})}$(".code-header button.button-run-rust").click(function(n){if(function(e){if($(e)[0].hasAttribute(t)){let n=$(e).attr(t);if(Number(n)+5e3>Date.now())return!0}return!1}($(this)))return;var a;a=$(this),$(a).attr(t,Date.now()+e),$("i",a).removeClass("icon-playfill").addClass("icon-loading");let r=function(t){let e=t.parentNode.parentNode.parentNode.nextElementSibling;if(null==e||"DETAILS"!=e.tagName||"run-output"!=e.className){let n=e;(e=document.createElement("details")).className="run-output";let o=document.createElement("summary");o.textContent=t.attributes["output-title"].value,e.appendChild(o),null==n?t.parentNode.parentNode.parentNode.parentNode.appendChild(e):n.parentNode.insertBefore(e,n)}return $(e).attr("open","open"),e}(this);$("p",$(r)).remove();let i=document.createElement("p");i.innerText=this.attributes["wait-message"].value,r.appendChild(i),o(this.parentNode.parentNode.nextElementSibling,i,$(this),this.attributes["error-prompt"].value)})}),$(function(){$("a[href*='#']").not("[href='#']").not("[href='#0']").click(function(t){if(this.pathname.replace(/^\//,"")===location.pathname.replace(/^\//,"")&&location.hostname===this.hostname){const e=16,n=decodeURI(this.hash);let o=RegExp(/^#fnref:/).test(n),a=RegExp(/^#fn:/).test(n),r=n.includes(":")?n.replace(/\:/,"\\:"):n,i=$(r);if(i.length){t.preventDefault(),history.pushState&&history.pushState(null,null,n);let r=$(this).offset().top,l=i.offset().top;const s=l<r,c=$("#topbar-wrapper").outerHeight();s&&o&&(l-=c+e/2),$("html,body").animate({scrollTop:l},800,()=>{const t=$(i);t.focus();if($("[scroll-focus=true]").length&&$("[scroll-focus=true]").attr("scroll-focus",!1),$(":target").length&&$(":target").attr("scroll-focus",!1),(a||o)&&t.attr("scroll-focus",!0),t.is(":focus"))return!1;t.attr("tabindex","-1"),t.focus()})}}})});